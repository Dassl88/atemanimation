<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Rauchfrei App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      background-color: #121212;
      color: #fff;
      font-family: Arial, sans-serif;
      margin: 0;
      padding-bottom: 100px;
    }
    nav {
      background-color: #1f1f1f;
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    nav a {
      color: white;
      text-decoration: none;
      padding: 10px 20px;
      border-radius: 5px;
    }
    nav a.active-nav {
      background-color: green;
    }
    .section {
      display: none;
      padding: 20px;
    }
    .section.active {
      display: block;
    }
    .circle {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: conic-gradient(green 0%, #444 0%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 10px auto;
      font-weight: bold;
      font-size: 16px;
    }
    .stat-box {
      background: #1f1f1f;
      margin: 10px auto;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      width: 80%;
    }
    .health-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .health-item {
      text-align: center;
    }
  </style>
</head>
<body>
  <nav>
    <a href="#" class="active-nav" onclick="showSection('dashboard')">Dashboard</a>
    <a href="#" onclick="showSection('meilensteine')">Meilensteine</a>
    <a href="#" onclick="showSection('daten')">Meine Daten</a>
  </nav>

  <section id="dashboard" class="section active">
    <h2 style="text-align:center;">Willkommen <span id="userNameDisplay">üë§</span></h2>
    <p style="text-align:center;" id="motivationSpruch">Motivationsspruch erscheint hier</p>

    <div class="stat-box" id="zeitBox">‚è≥ Rauchfrei seit: ...</div>
    <div class="stat-box" id="zigBox">üö≠ Nicht gerauchte Zigaretten: ...</div>
    <div class="stat-box" id="geldBox">üí∞ Gespartes Geld: ...</div>
    <div class="stat-box" id="lebenBox">‚ù§Ô∏è Gewonnene Lebenszeit: ...</div>

    <h3 style="text-align:center; margin-top: 40px;">Wiedererlangte Gesundheit</h3>
    <div class="health-grid">
      <div class="health-item">
        <strong>Kurzfristig</strong><br />
        <small>1 Min ‚Äì 1 Woche</small>
        <div class="circle" id="shortHealth">0%</div>
      </div>
      <div class="health-item">
        <strong>Mittelfristig</strong><br />
        <small>1 ‚Äì 6 Wochen</small>
        <div class="circle" id="midHealth">0%</div>
      </div>
      <div class="health-item">
        <strong>Langfristig</strong><br />
        <small>6 Wochen ‚Äì 1 Jahr</small>
        <div class="circle" id="longHealth">0%</div>
      </div>
      <div class="health-item">
        <strong>Sehr langfristig</strong><br />
        <small>1 Jahr ‚Äì 15 Jahre</small>
        <div class="circle" id="veryHealth">0%</div>
      </div>
    </div>
  </section>
<section id="daten" class="section">
  <h2 style="text-align:center;">Meine Daten</h2>
  <form id="userDataForm" style="max-width: 400px; margin: auto;">
    <label>Name:
      <input type="text" id="name" name="name" required>
    </label><br><br>
    <label>Aufh√∂rdatum:
      <input type="date" id="quitDate" name="quitDate" required>
    </label><br><br>
    <label>Uhrzeit:
      <input type="time" id="quitTime" name="quitTime" required>
    </label><br><br>
    <label>Zigaretten pro Tag:
      <input type="number" id="cigsPerDay" name="cigsPerDay" required>
    </label><br><br>
    <label>Zigaretten pro Schachtel:
      <input type="number" id="cigsPerPack" name="cigsPerPack" required>
    </label><br><br>
    <label>Preis pro Schachtel (‚Ç¨):
      <input type="number" step="0.01" id="packPrice" name="packPrice" required>
    </label><br><br>
    <label>Alter:
      <input type="number" id="age" name="age">
    </label><br><br>
    <label>Jahre geraucht:
      <input type="number" id="yearsSmoked" name="yearsSmoked">
    </label><br><br>
    <button type="submit">Daten speichern</button>
  </form>
</section>
<section id="meilensteine" class="section">
  <h2 style="text-align:center;">Meilensteine</h2>
  <div id="milestoneList" style="max-width: 800px; margin: auto;"></div>
</section>
<script>
  function showSection(id) {
    document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
    document.querySelectorAll("nav a").forEach(a => a.classList.remove("active-nav"));
    document.querySelector(nav a[onclick*="${id}"]).classList.add("active-nav");
  }

  const sprueche = [
    "Heute ist ein guter Tag, um stark zu sein.",
    "Du gewinnst jeden Tag mehr zur√ºck.",
    "Dein K√∂rper sagt Danke.",
    "Freiheit beginnt mit dem ersten Schritt.",
    "Du bist st√§rker als du denkst.",
    "Jede Zigarette, die du nicht rauchst, z√§hlt.",
    "Atme durch ‚Äì frei und klar.",
    "Deine Gesundheit geh√∂rt dir.",
    "Mach weiter ‚Äì du wirst belohnt.",
    "Du bist auf dem richtigen Weg.",
    "Der erste Tag vom Rest deines Lebens.",
    "Du hast heute schon gewonnen.",
    "Es wird jeden Tag leichter.",
    "Sei stolz auf dich.",
    "Du bist ein Vorbild.",
    "Dein Herz schl√§gt freier.",
    "Deine Lunge atmet auf.",
    "Heute bist du ein Held.",
    "Rauchfrei hei√üt Lebensqualit√§t.",
    "Bleib stark ‚Äì es lohnt sich."
  ];

  const form = document.getElementById("userDataForm");
  form.addEventListener("submit", function(e) {
    e.preventDefault();
    const fields = ["name","quitDate","quitTime","cigsPerDay","cigsPerPack","packPrice","age","yearsSmoked"];
    const userData = {};
    fields.forEach(f => userData[f] = document.getElementById(f).value);
    localStorage.setItem("rauchfreiUserData", JSON.stringify(userData));
    alert("Daten gespeichert!");
    location.reload();
  });

  function loadUserData() {
    const d = JSON.parse(localStorage.getItem("rauchfreiUserData"));
    if (!d || !d.quitDate || !d.quitTime) return null;
    const start = new Date(${d.quitDate}T${d.quitTime});
    const now = new Date();
    const minutes = Math.floor((now - start) / 60000);
    const days = minutes / 1440;
    return { ...d, start, minutes, days };
  }

  function fillDashboard(data) {
    document.getElementById("userNameDisplay").textContent = data.name || "Freund";
    document.getElementById("motivationSpruch").textContent = sprueche[Math.floor(Math.random() * sprueche.length)];

    const zigsPerDay = parseFloat(data.cigsPerDay);
    const packs = parseFloat(data.cigsPerPack);
    const price = parseFloat(data.packPrice);
    const zigs = Math.round((zigsPerDay / 1440) * data.minutes);
    const euros = ((zigs / packs) * price).toFixed(2);
    const lifetime = Math.round(zigs * 10); // 10 Minuten pro Zigarette

    document.getElementById("zeitBox").textContent = ‚è≥ Rauchfrei seit: ${Math.floor(data.days)} Tage;
    document.getElementById("zigBox").textContent = üö≠ Nicht gerauchte Zigaretten: ${zigs};
    document.getElementById("geldBox").textContent = üí∞ Gespartes Geld: ${euros} ‚Ç¨;
    document.getElementById("lebenBox").textContent = ‚ù§Ô∏è Gewonnene Lebenszeit: ${Math.floor(lifetime / 1440)} Tage ${Math.floor((lifetime % 1440) / 60)} Std;
  }

  const milestoneData = [ { title: "Puls und Blutdruck", days: 0.01, desc: "20 Minuten Puls und Blutdruck sinken auf Normalniveau." },
  { title: "K√∂rpertemperatur reguliert sich", days: 0.02, desc: " 30 Minuten H√§nde und F√º√üe werden besser durchblutet." },
  { title: "Durchblutung verbessert sich", days: 0.08, desc: " 2 Stunden Extremit√§ten werden w√§rmer und besser versorgt." },
  { title: "Sauerstoffgehalt", days: 0.33, desc: " 8 Stunden Sauerstoffgehalt im Blut normalisiert sich." },
  { title: "Erste Entzugserscheinungen", days: 0.5, desc: "12 Stunden Reizbarkeit und Unruhe treten auf." },
  { title: "Kohlenmonoxidspiegel sinkt", days: 1, desc: "24 Stunden Kohlenmonoxid wird vollst√§ndig abgebaut." },
  { title: "Mentale Klarheit kehrt zur√ºck", days: 1.5, desc: "1,5 Tage Konzentration verbessert sich." },
  { title: "Geruch des Rauchens nimmt ab", days: 2, desc: "2 Tage Atem, Haut und Kleidung riechen frischer." },
  { title: "Riechsinn sch√§rft sich", days: 2, desc: "2 Tage Geruchssinn funktioniert deutlich besser." },
  { title: "Geschmackssinn kehrt zur√ºck", days: 2, desc: "2 Tage Essen schmeckt wieder intensiver." },
  { title: "Nikotinabbau", days: 3, desc: "3 Tage Nikotin ist komplett aus dem K√∂rper." },
  { title: "Atemwege beginnen sich zu reinigen", days: 2, desc: "2 Tage Lunge transportiert Schleim aktiv ab." },
  { title: "Raucherhusten nimmt zu", days: 3, desc: "3 Tage Lunge beginnt sich zu reinigen, was Husten verst√§rkt." },
  { title: "H√§ndezittern verschwindet", days: 5, desc: "5 Tage Zittern durch Entzug klingt ab." },
  { title: "Zuckerstoffwechsel stabilisiert sich", days: 5, desc: "5 Tage Blutzuckerwerte normalisieren sich." },
  { title: "Zahnfleisch wird besser durchblutet", days: 5, desc: "5 Tage Zahnfleisch beginnt zu heilen." },
  { title: "Finger verf√§rben sich zur√ºck", days: 6, desc: "6 Tage Gelbf√§rbung geht langsam zur√ºck." },
  { title: "Selbstwertgef√ºhl steigt", days: 6, desc: "6 Tage Stolz auf die Ver√§nderung w√§chst." },
  { title: "Erster Energieschub", days: 6, desc: "6 Tage Du f√ºhlst dich vitaler." },
  { title: "Besseres Hautbild", days: 7, desc: "7 Tage Haut sieht frischer aus." },
  { title: "Atem wird frischer", days: 3, desc: "3 Tage Mundgeruch verschwindet." },
  { title: "1 Woche rauchfrei ‚Äì erster gro√üer Meilenstein", days: 7, desc: "7 Tage Erste kritische H√ºrde √ºberwunden." },
  { title: "Lungenfunktion verbessert sich deutlich", days: 21, desc: "21 Tage Besseres Atemvolumen, weniger Luftnot." },
  { title: "Atemnot reduziert sich", days: 21, desc: "21 Tage Lunge arbeitet sp√ºrbar effizienter." },
  { title: "Husten l√§sst nach", days: 28, desc: "28 Tage Reizhusten verschwindet." },
  { title: "Flimmerh√§rchen regenerieren sich", days: 28, desc: "28 Tage Reinigung der Lunge funktioniert wieder." },
  { title: "Immunsystem wird st√§rker", days: 21, desc: "21 Tage Abwehrkr√§fte steigen." },
  { title: "Besserer Teint", days: 28, desc: "28 Tage Gesunde Hautfarbe kehrt zur√ºck." },
  { title: "Sexualfunktion verbessert sich", days: 28, desc: "28 Tage Bessere Durchblutung = bessere Leistung." },
  { title: "Emotionale Ausgeglichenheit", days: 42, desc: "42 Tage Stimmung wird dauerhaft stabil." },
  { title: "Mehr Ausdauer beim Sport", days: 28, desc: "28 Tage Du kannst dich l√§nger k√∂rperlich bet√§tigen." },
  { title: "Schlaf wird erholsamer", days: 35, desc: "35 Tage Tiefschlafphasen stabilisieren sich." },
  { title: "Konzentration vollst√§ndig zur√ºck", days: 28, desc: "28 Tage Du bist geistig wieder voll leistungsf√§hig." },
  { title: "Mehr Energie im Alltag", days: 35, desc: "35 Tage Du f√ºhlst dich kraftvoller." },
  { title: "Schwei√ü riecht neutraler", days: 28, desc: "28 Tage Kein Teergeruch mehr √ºber Hautausscheidung." },
  { title: "Blut flie√üt besser", days: 35, desc: "35 Tage Geringeres Risiko f√ºr Blutgerinnsel." },
  { title: "Infektanf√§lligkeit sinkt", days: 42, desc: "42 Tage Weniger grippale Infekte." },
  { title: "Zellregeneration beschleunigt sich", days: 28, desc: "28 Tage K√∂rper beginnt, sich neu aufzubauen." },
  { title: "Entz√ºndungswerte sinken", days: 42, desc: "42 Tage Chronische Entz√ºndungen lassen nach." },
  { title: "Herzfrequenzvariabilit√§t verbessert sich", days: 42, desc: "42 Tage Bessere Anpassung an Belastung." },
  { title: "N√§gel und Haare wachsen ges√ºnder", days: 42, desc: "42 Tage N√§hrstoffaufnahme verbessert sich sichtbar." },
 { title: "Z√§hne werden heller", days: 75, desc: "75 Tage Verf√§rbungen bilden sich zur√ºck." },
  { title: "Haut wirkt j√ºnger und ges√ºnder", days: 90, desc: "90 Tage Frischer Teint und weniger Falten." },
  { title: "Stoffwechsel stabilisiert sich langfristig", days: 60, desc: "60 Tage K√∂rpergewicht reguliert sich." },
  { title: "Verdauung normalisiert sich dauerhaft", days: 90, desc: "90 Tage Regelm√§√üiger Rhythmus." },
  { title: "Schleimproduktion reduziert sich", days: 120, desc: "120 Tage Lunge produziert weniger Auswurf." },
  { title: "Husten verschwindet vollst√§ndig", days: 180, desc: "180 Tage Atemwege sind frei." },
  { title: "Atemtiefe verbessert sich deutlich", days: 150, desc: "150 Tage Du atmest tiefer und freier." },
  { title: "Lungenfunktion nahezu regeneriert", days: 270, desc: "270 Tage Leistungsf√§higkeit fast wie vor dem Rauchen." },
  { title: "Psychische Entlastung dauerhaft sp√ºrbar", days: 180, desc: "180 Tage Kein innerer Suchtdruck mehr." },
  { title: "Herzinfarktrisiko halbiert", days: 365, desc: "365 Tage Risiko ist nur noch halb so hoch wie bei Rauchern." },
  { title: "Immunsystem auf Top-Niveau", days: 540, desc: "540 Tage Immunfunktion entspricht der eines Nichtrauchers." },
  { title: "Fruchtbarkeit langfristig verbessert", days: 730, desc: "730 Tage Hormonspiegel und Fruchtbarkeit steigen." },
  { title: "Zellalterung verlangsamt sich sp√ºrbar", days: 730, desc: "730 Tage Zellen erneuern sich effizienter." },
  { title: "Emotionale Resilienz gest√§rkt", days: 730, desc: "730 Tage St√§rkere Bew√§ltigungsstrategien." },
  { title: "Gelenkgesundheit verbessert sich", days: 1095, desc: "1098 Tage Weniger Entz√ºndungen und Abbauprozesse." },
  { title: "Nichtraucheridentit√§t gefestigt", days: 1460, desc: "1460 Tage Rauchen ist kein Thema mehr." },
  { title: "R√ºckfallrisiko minimal", days: 1825, desc: "1825 Tage Psychisch komplett losgel√∂st vom Rauchen." },
  { title: "Diabetesrisiko reduziert sich", days: 1825, desc: "1825 TageStoffwechsel normalisiert sich nachhaltig." },
  { title: "Schlaganfallrisiko auf Nichtraucher-Niveau", days: 1825, desc: "1825 Tage Gro√ües Risiko verringert." },
  { title: "Krebsrisiko insgesamt deutlich gesenkt", days: 2190, desc: "2190 Tage Fortschreitende Risikoreduktion." },
  { title: "COPD-Risiko langfristig deutlich geringer", days: 2920, desc: "Tage 2929 Lungenfunktion bleibt stabil." },
  { title: "Kehlkopf-, Speiser√∂hren-, Mundkrebsrisiko halbiert", days: 3285, desc: "3285 Tage Stark gesenktes Krebsrisiko." },
  { title: "Bauchspeicheldr√ºsenkrebsrisiko sinkt deutlich", days: 3650, desc: "3650 Tage Fast wieder wie bei Nichtrauchern." },
  { title: "Herz-Kreislauf-Gesundheit vollst√§ndig erholt", days: 4380, desc: "4380 Tage Arterien und Herz funktionieren wie bei Nichtrauchern." },
  { title: "Bessere Gehirnleistung im Alter", days: 3650, desc: "3650 Tage Weniger Risiko f√ºr Demenz und Vergesslichkeit." },
  { title: "Langsamerer Alterungsprozess", days: 730, desc: "730 Tage Zellalterung verl√§uft messbar langsamer." },
  { title: "Lebenserwartung deutlich erh√∂ht", days: 3650, desc: "5‚Äì10 Jahre mehr Leben im Vergleich zu Rauchern." },
  { title: "H√∂here Lebensqualit√§t auf allen Ebenen", days: 3650, desc: "3650 Tage Gesundheit, Wohlbefinden und Energie auf hohem Niveau." },
  { title: "Selbstvertrauen maximal", days: 1095, desc: "1095 Tage Stolz auf die Ver√§nderung tief verankert." }
];
  function updateHealthCircles(data) {
    const cats = {
      shortHealth: milestoneData.filter(m => m.days < 7),
      midHealth: milestoneData.filter(m => m.days >= 7 && m.days < 42),
      longHealth: milestoneData.filter(m => m.days >= 42 && m.days <= 365),
      veryHealth: milestoneData.filter(m => m.days > 365)
    };
    for (let id in cats) {
      const list = cats[id];
      const avg = list.length
        ? Math.round(list.map(m => Math.min(100, data.days / m.days * 100)).reduce((a, b) => a + b, 0) / list.length)
        : 0;
      const el = document.getElementById(id);
      el.innerHTML = ${avg}%;
      el.style.background = conic-gradient(green ${avg}%, #444 ${avg}%);
    }
  }

  function renderMilestones(data) {
    const container = document.getElementById("milestoneList");
    container.innerHTML = "";
    const groups = {
      "Kurzfristig": milestoneData.filter(m => m.days < 7),
      "Mittelfristig": milestoneData.filter(m => m.days >= 7 && m.days < 42),
      "Langfristig": milestoneData.filter(m => m.days >= 42 && m.days <= 365),
      "Sehr langfristig": milestoneData.filter(m => m.days > 365)
    };
    for (let cat in groups) {
      const groupBox = document.createElement("div");
      const header = document.createElement("h3");
      header.innerText = cat;
      header.style.textAlign = "center";
      groupBox.appendChild(header);

      groups[cat].forEach(m => {
        const percent = Math.min(100, Math.round((data.days / m.days) * 100));
        const box = document.createElement("div");
        box.className = "milestone";
        box.innerHTML = 
          <h4>${m.title}</h4>
          <div class="circle" style="background: conic-gradient(green ${percent}%, #444 ${percent}%);">${percent}%</div>
          <p>${m.desc}</p>;
        groupBox.appendChild(box);
      });

      container.appendChild(groupBox);
    }
  }

  window.onload = () => {
    const data = loadUserData();
    if (data) {
      fillDashboard(data);
      renderMilestones(data);
      updateHealthCircles(data);
      for (let key in data) {
        if (document.getElementById(key)) document.getElementById(key).value = data[key];
      }
    }
  };
</script>
</body>
</html>
