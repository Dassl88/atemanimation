<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Rauchfrei Tracker Pro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      padding: 20px;
      background-color: #000;
      font-family: Arial, sans-serif;
      color: white;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
    }
    .buttons {
      text-align: center;
      margin-bottom: 30px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin: 5px;
      border-radius: 8px;
      border: none;
      background-color: #10b981;
      color: white;
      cursor: pointer;
    }
    .hidden {
      display: none;
    }
    .settings {
      max-width: 400px;
      margin: 0 auto 30px auto;
      background: #111;
      padding: 20px;
      border-radius: 12px;
    }
    input {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      margin: 10px 0;
      border-radius: 8px;
      border: none;
    }
    .grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }
    .reel {
      background: #111;
      border-radius: 16px;
      padding: 20px;
      width: 240px;
      text-align: center;
    }
    .progress-circle {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: conic-gradient(#10b981 0%, #333 0%);
      margin: 10px auto;
      position: relative;
    }
    .progress-circle span {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 18px;
      color: white;
    }
    .info-box {
      background: #111;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 30px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
  </style>
</head>
<body>
  <h1>üö≠ Rauchfrei Tracker Pro</h1>

  <div class="buttons">
    <button onclick="toggleSettings()">Einstellungen</button>
    <button onclick="showProgress()">Fortschritt anzeigen</button>
  </div>

  <div id="settings" class="settings hidden">
    <label>Aufh√∂rdatum & Uhrzeit:</label><br />
    <input type="datetime-local" id="quitDate" /><br />

    <label>Zigaretten pro Tag:</label><br />
    <input type="number" id="cigsPerDay" value="20" /><br />

    <label>Preis pro Schachtel (‚Ç¨):</label><br />
    <input type="number" id="packPrice" value="8" step="0.01" /><br />

    <label>Zigaretten pro Schachtel:</label><br />
    <input type="number" id="cigsPerPack" value="20" /><br />

    <button onclick="saveSettings()">Speichern</button>
    <button onclick="resetData()" style="background-color: #ef4444;">Daten zur√ºcksetzen</button>
  </div>

  <div id="info" class="info-box"></div>
  <div id="reels" class="grid"></div>

  <script>
    const milestones = [
      { title: "Puls normalisiert sich", hours: 0.3, description: "Blutdruck und Puls sinken nach 20 Minuten." },
      { title: "CO halbiert", hours: 8, description: "Kohlenmonoxid im Blut halbiert sich." },
      { title: "CO vollst√§ndig abgebaut", hours: 12, description: "CO-Wert ist auf Null, Sauerstoff steigt." },
      { title: "Geschmack & Geruch zur√ºck", hours: 48, description: "Sinne regenerieren sich." },
      { title: "Bronchien entspannen sich", hours: 72, description: "Bessere Atmung, weniger Schleim." },
      { title: "Entzugserscheinungen H√∂chststand", hours: 72, description: "St√§rkster k√∂rperlicher Suchtdruck bis Tag 3." },
      { title: "Bessere Hautdurchblutung", hours: 120, description: "Haut wird rosiger durch bessere Durchblutung." },
      { title: "Schlaf normalisiert sich", hours: 168, description: "Nach ca. 1 Woche ruhigerer Schlaf." },
      { title: "Lungenfunktion verbessert", hours: 336, description: "2 Wochen nach Rauchstopp steigt die Lungenkapazit√§t." },
      { title: "Entzug k√∂rperlich vorbei", hours: 336, description: "K√∂rperlicher Entzug meist √ºberwunden (Woche 2)." },
      { title: "Psychische Trigger nehmen ab", hours: 720, description: "Nach einem Monat ist man stabiler gegen√ºber Ausl√∂sern." },
      { title: "Haut verbessert sich sichtbar", hours: 1440, description: "Nach 2 Monaten: weniger Pickel, bessere Elastizit√§t." },
      { title: "Lunge regeneriert", hours: 2160, description: "3 Monate ‚Äì besseres Atmen, Ausdauer steigt." },
      { title: "Immunsystem gest√§rkt", hours: 2880, description: "Nach 4 Monaten: seltener krank." },
      { title: "Schleimproduktion sinkt", hours: 4320, description: "Nach 6 Monaten: weniger Husten, Atemwege frei." },
      { title: "Herzinfarktrisiko halbiert", hours: 8760, description: "Nach 1 Jahr ist das Risiko um 50 % reduziert." },
      { title: "Lunge weiter gereinigt", hours: 13140, description: "Nach 1,5 Jahren ‚Äì tiefere Atmung, mehr Energie." },
      { title: "R√ºckfallgefahr stark gesunken", hours: 13140, description: "Nach 1,5 Jahren bleibt die Mehrheit rauchfrei." },
      { title: "Gef√§√ügesundheit wie Nichtraucher", hours: 17520, description: "Nach 2 Jahren: fast normales Herz-Kreislauf-Risiko." },
      { title: "Mentale St√§rke w√§chst", hours: 26280, description: "Nach 3 Jahren: kaum Rauchverlangen." },
      { title: "Schlaganfallrisiko normal", hours: 43800, description: "Nach 5 Jahren: Risiko wie bei Nichtrauchern." },
      { title: "Lungenkrebsrisiko halbiert", hours: 87600, description: "Nach 10 Jahren halb so hoch wie bei Rauchern." },
      { title: "Herzgesundheit wie nie geraucht", hours: 131400, description: "Nach 15 Jahren ‚Äì vollst√§ndige Regeneration." }
    ];

    function toggleSettings() {
      document.getElementById("settings").classList.toggle("hidden");
    }

    function saveSettings() {
      const quit = document.getElementById("quitDate").value;
      const cigs = document.getElementById("cigsPerDay").value;
      const price = document.getElementById("packPrice").value;
      const perPack = document.getElementById("cigsPerPack").value;

      if (!quit || !cigs || !price || !perPack) {
        alert("Bitte alle Eingaben ausf√ºllen.");
        return;
      }

      localStorage.setItem("quitDate", quit);
      localStorage.setItem("cigsPerDay", cigs);
      localStorage.setItem("packPrice", price);
      localStorage.setItem("cigsPerPack", perPack);
      alert("Einstellungen gespeichert.");
      toggleSettings();
    }

    function showProgress() {
      const quitInput = localStorage.getItem("quitDate");
      const cigsPerDay = parseInt(localStorage.getItem("cigsPerDay"));
      const packPrice = parseFloat(localStorage.getItem("packPrice"));
      const cigsPerPack = parseInt(localStorage.getItem("cigsPerPack"));

      if (!quitInput || isNaN(cigsPerDay) || isNaN(packPrice) || isNaN(cigsPerPack)) {
        alert("Bitte Einstellungen zuerst ausf√ºllen.");
        return;
      }

      const quitTime = new Date(quitInput);
      const now = new Date();
      const diffHours = (now - quitTime) / 1000 / 60 / 60;
      const diffDays = diffHours / 24;

      const totalCigsAvoided = Math.floor(cigsPerDay * diffDays);
      const totalMoneySaved = ((totalCigsAvoided / cigsPerPack) * packPrice).toFixed(2);
      const lifeRegainedMin = totalCigsAvoided * 11;
      const lifeRegainedHr = Math.floor(lifeRegainedMin / 60);
      const lifeRegainedMinRest = lifeRegainedMin % 60;

      document.getElementById("info").innerHTML = `
        <h2>Dein Fortschritt</h2>
        <p><strong>Gesparte Zigaretten:</strong> ${totalCigsAvoided}</p>
        <p><strong>Gespartes Geld:</strong> ‚Ç¨ ${totalMoneySaved}</p>
        <p><strong>Zur√ºckgewonnene Lebenszeit:</strong> ${lifeRegainedHr} Stunden ${lifeRegainedMinRest} Minuten</p>
      `;

      const reelsContainer = document.getElementById("reels");
      reelsContainer.innerHTML = "";

      milestones.forEach(m => {
        const percent = Math.min((diffHours / m.hours) * 100, 100);
        const reel = document.createElement("div");
        reel.className = "reel";
        reel.innerHTML = `
          <h3>${m.title}</h3>
          <div class="progress-circle" style="background: conic-gradient(#10b981 ${percent}%, #333 ${percent}%);">
            <span>${Math.floor(percent)}%</span>
          </div>
          <p>${m.description}</p>
          ${percent === 100 ? '<p style="color:#10b981;">‚úÖ Erreicht!</p>' : ""}
        `;
        reelsContainer.appendChild(reel);
      });
    }

    function resetData() {
      localStorage.clear();
      location.reload();
    }
  </script>
</body>
</html>
