<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Rauchfrei App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial; background: #121212; color: white; margin: 0; }
    nav { display: flex; justify-content: space-around; background: #1f1f1f; padding: 10px; position: sticky; top: 0; }
    nav a { color: white; padding: 10px 20px; text-decoration: none; }
    nav a.active-nav { background: green; border-radius: 5px; }
    .section { display: none; padding: 20px; }
    .section.active { display: block; }
    .circle { width: 100px; height: 100px; border-radius: 50%; background: conic-gradient(green 0%, #444 0); display: flex; align-items: center; justify-content: center; margin: 10px auto; font-weight: bold; }
    .milestone { background: #1f1f1f; margin: 15px 0; padding: 15px; border-radius: 10px; text-align: center; }
    form label { display: block; margin-top: 10px; }
    form input { width: 100%; padding: 8px; margin-top: 5px; }
    form button { margin-top: 15px; padding: 10px; background: green; color: white; border: none; cursor: pointer; }
  </style>
</head>
<body>
  <nav>
    <a href="#" class="active-nav" onclick="showSection('dashboard')">Dashboard</a>
    <a href="#" onclick="showSection('meilensteine')">Meilensteine</a>
    <a href="#" onclick="showSection('daten')">Meine Daten</a>
  </nav>

  <section id="dashboard" class="section active">
    <h2 style="text-align:center;">Hallo <span id="userNameDisplay"></span> ðŸ‘‹</h2>
    <p style="text-align:center;" id="motivation"></p>
    <div class="health-grid">
      <div class="health-item"><h4>Kurzfristig</h4><div class="circle" id="shortHealth">0%</div></div>
      <div class="health-item"><h4>Mittelfristig</h4><div class="circle" id="midHealth">0%</div></div>
      <div class="health-item"><h4>Langfristig</h4><div class="circle" id="longHealth">0%</div></div>
      <div class="health-item"><h4>Sehr langfristig</h4><div class="circle" id="veryHealth">0%</div></div>
    </div>
  </section>
  <section id="daten" class="section">
    <h2 style="text-align:center;">Meine Daten</h2>
    <form id="userDataForm">
      <label>Name:<input type="text" id="name" required></label>
      <label>AufhÃ¶rdatum:<input type="date" id="quitDate" required></label>
      <label>Uhrzeit:<input type="time" id="quitTime" required></label>
      <label>Zigaretten/Tag:<input type="number" id="cigsPerDay" required></label>
      <label>Zigaretten pro Schachtel:<input type="number" id="cigsPerPack" required></label>
      <label>Preis pro Schachtel (â‚¬):<input type="number" step="0.01" id="packPrice" required></label>
      <label>Alter:<input type="number" id="age"></label>
      <label>Jahre geraucht:<input type="number" id="yearsSmoked"></label>
      <button type="submit">Speichern</button>
    </form>
  </section>
  <section id="meilensteine" class="section">
    <h2 style="text-align:center;">Alle Meilensteine</h2>
    <div id="milestoneList"></div>
  </section>

  <script>
    // Navigation
    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelectorAll('nav a').forEach(a => a.classList.remove('active-nav'));
      document.querySelector(`nav a[onclick*="${id}"]`).classList.add('active-nav');
    }

    // MotivationssprÃ¼che
    const sprueche = [
      "Heute ist ein guter Tag, um stark zu sein.",
      "Jede Zigarette, die du nicht rauchst, zÃ¤hlt.",
      "Du atmest jetzt freier.",
      "Dein Herz dankt dir.",
      "Du wirst jeden Tag gesÃ¼nder.",
      "Freiheit beginnt mit dem ersten Schritt.",
      "Du schaffst das â€“ und zwar dauerhaft.",
      "Ein neuer Anfang beginnt jetzt.",
      "Du bist stÃ¤rker als der Drang.",
      "Dein KÃ¶rper regeneriert sich.",
      "Du gewinnst Leben zurÃ¼ck.",
      "Lass den Rauch hinter dir.",
      "Die Zukunft ist rauchfrei.",
      "Heute bist du dein Held.",
      "Mit jedem Atemzug wirdâ€™s besser.",
      "Mach weiter â€“ du bist auf dem Weg.",
      "Du bist nicht allein.",
      "Du bist mutig â€“ und frei.",
      "Rauchfrei ist das neue GlÃ¼ck.",
      "Du hast dich selbst gewÃ¤hlt."
    ];

    // Daten speichern
    const form = document.getElementById("userDataForm");
    form.addEventListener("submit", function(e) {
      e.preventDefault();
      const data = {};
      ["name","quitDate","quitTime","cigsPerDay","cigsPerPack","packPrice","age","yearsSmoked"].forEach(id => {
        data[id] = document.getElementById(id).value;
      });
      localStorage.setItem("rauchfreiData", JSON.stringify(data));
      alert("Daten gespeichert!");
      location.reload();
    });

    // Meilensteindaten â€“ Liste folgt im nÃ¤chsten Block
  </script>
<script>
  const milestoneData = [ 
  { title: "Puls und Blutdruck", days: 0.01, desc: "Puls und Blutdruck sinken auf Normalniveau." },
  { title: "KÃ¶rpertemperatur reguliert sich", days: 0.02, desc: "HÃ¤nde und FÃ¼ÃŸe werden besser durchblutet." },
  { title: "Durchblutung verbessert sich", days: 0.08, desc: "ExtremitÃ¤ten werden wÃ¤rmer und besser versorgt." },
  { title: "Sauerstoffgehalt", days: 0.33, desc: "Sauerstoffgehalt im Blut normalisiert sich." },
  { title: "Erste Entzugserscheinungen", days: 0.5, desc: "Reizbarkeit und Unruhe treten auf." },
  { title: "Kohlenmonoxidspiegel sinkt", days: 1, desc: "Kohlenmonoxid wird vollstÃ¤ndig abgebaut." },
  { title: "Mentale Klarheit kehrt zurÃ¼ck", days: 1.5, desc: "Konzentration verbessert sich." },
  { title: "Geruch des Rauchens nimmt ab", days: 2, desc: "Atem, Haut und Kleidung riechen frischer." },
  { title: "Riechsinn schÃ¤rft sich", days: 2, desc: "Geruchssinn funktioniert deutlich besser." },
  { title: "Geschmackssinn kehrt zurÃ¼ck", days: 2, desc: "Essen schmeckt wieder intensiver." },
  { title: "Nikotinabbau", days: 3, desc: "Nikotin ist komplett aus dem KÃ¶rper." },
  { title: "Atemwege beginnen sich zu reinigen", days: 2, desc: "Lunge transportiert Schleim aktiv ab." },
  { title: "Raucherhusten nimmt zu", days: 3, desc: "Lunge beginnt sich zu reinigen, was Husten verstÃ¤rkt." },
  { title: "HÃ¤ndezittern verschwindet", days: 5, desc: "Zittern durch Entzug klingt ab." },
  { title: "Zuckerstoffwechsel stabilisiert sich", days: 5, desc: "Blutzuckerwerte normalisieren sich." },
  { title: "Zahnfleisch wird besser durchblutet", days: 5, desc: "Zahnfleisch beginnt zu heilen." },
  { title: "Finger verfÃ¤rben sich zurÃ¼ck", days: 6, desc: "GelbfÃ¤rbung geht langsam zurÃ¼ck." },
  { title: "SelbstwertgefÃ¼hl steigt", days: 6, desc: "Stolz auf die VerÃ¤nderung wÃ¤chst." },
  { title: "Erster Energieschub", days: 6, desc: "Du fÃ¼hlst dich vitaler." },
  { title: "Besseres Hautbild", days: 7, desc: "Haut sieht frischer aus." },
  { title: "Atem wird frischer", days: 3, desc: "Mundgeruch verschwindet." },
  { title: "1 Woche rauchfrei â€“ erster groÃŸer Meilenstein", days: 7, desc: "Erste kritische HÃ¼rde Ã¼berwunden." },
  { title: "Lungenfunktion verbessert sich deutlich", days: 21, desc: "Besseres Atemvolumen, weniger Luftnot." },
  { title: "Atemnot reduziert sich", days: 21, desc: "Lunge arbeitet spÃ¼rbar effizienter." },
  { title: "Husten lÃ¤sst nach", days: 28, desc: "Reizhusten verschwindet." },
  { title: "FlimmerhÃ¤rchen regenerieren sich", days: 28, desc: "Reinigung der Lunge funktioniert wieder." },
  { title: "Immunsystem wird stÃ¤rker", days: 21, desc: "AbwehrkrÃ¤fte steigen." },
  { title: "Besserer Teint", days: 28, desc: "Gesunde Hautfarbe kehrt zurÃ¼ck." },
  { title: "Sexualfunktion verbessert sich", days: 28, desc: "Bessere Durchblutung = bessere Leistung." },
  { title: "Emotionale Ausgeglichenheit", days: 42, desc: "Stimmung wird dauerhaft stabil." },
  { title: "Mehr Ausdauer beim Sport", days: 28, desc: "Du kannst dich lÃ¤nger kÃ¶rperlich betÃ¤tigen." },
  { title: "Schlaf wird erholsamer", days: 35, desc: "Tiefschlafphasen stabilisieren sich." },
  { title: "Konzentration vollstÃ¤ndig zurÃ¼ck", days: 28, desc: "Du bist geistig wieder voll leistungsfÃ¤hig." },
  { title: "Mehr Energie im Alltag", days: 35, desc: "Du fÃ¼hlst dich kraftvoller." },
  { title: "SchweiÃŸ riecht neutraler", days: 28, desc: "Kein Teergeruch mehr Ã¼ber Hautausscheidung." },
  { title: "Blut flieÃŸt besser", days: 35, desc: "Geringeres Risiko fÃ¼r Blutgerinnsel." },
  { title: "InfektanfÃ¤lligkeit sinkt", days: 42, desc: "Weniger grippale Infekte." },
  { title: "Zellregeneration beschleunigt sich", days: 28, desc: "KÃ¶rper beginnt, sich neu aufzubauen." },
  { title: "EntzÃ¼ndungswerte sinken", days: 42, desc: "Chronische EntzÃ¼ndungen lassen nach." },
  { title: "HerzfrequenzvariabilitÃ¤t verbessert sich", days: 42, desc: "Bessere Anpassung an Belastung." },
  { title: "NÃ¤gel und Haare wachsen gesÃ¼nder", days: 42, desc: "NÃ¤hrstoffaufnahme verbessert sich sichtbar." },
    { title: "ZÃ¤hne werden heller", days: 75, desc: "VerfÃ¤rbungen bilden sich zurÃ¼ck." },
  { title: "Haut wirkt jÃ¼nger und gesÃ¼nder", days: 90, desc: "Frischer Teint und weniger Falten." },
  { title: "Stoffwechsel stabilisiert sich langfristig", days: 60, desc: "KÃ¶rpergewicht reguliert sich." },
  { title: "Verdauung normalisiert sich dauerhaft", days: 90, desc: "RegelmÃ¤ÃŸiger Rhythmus." },
  { title: "Schleimproduktion reduziert sich", days: 120, desc: "Lunge produziert weniger Auswurf." },
  { title: "Husten verschwindet vollstÃ¤ndig", days: 180, desc: "Atemwege sind frei." },
  { title: "Atemtiefe verbessert sich deutlich", days: 150, desc: "Du atmest tiefer und freier." },
  { title: "Lungenfunktion nahezu regeneriert", days: 270, desc: "LeistungsfÃ¤higkeit fast wie vor dem Rauchen." },
  { title: "Psychische Entlastung dauerhaft spÃ¼rbar", days: 180, desc: "Kein innerer Suchtdruck mehr." },
  { title: "Herzinfarktrisiko halbiert", days: 365, desc: "Risiko ist nur noch halb so hoch wie bei Rauchern." },
  { title: "Immunsystem auf Top-Niveau", days: 540, desc: "Immunfunktion entspricht der eines Nichtrauchers." },
  { title: "Fruchtbarkeit langfristig verbessert", days: 730, desc: "Hormonspiegel und Fruchtbarkeit steigen." },
  { title: "Zellalterung verlangsamt sich spÃ¼rbar", days: 730, desc: "Zellen erneuern sich effizienter." },
  { title: "Emotionale Resilienz gestÃ¤rkt", days: 730, desc: "StÃ¤rkere BewÃ¤ltigungsstrategien." },
  { title: "Gelenkgesundheit verbessert sich", days: 1095, desc: "Weniger EntzÃ¼ndungen und Abbauprozesse." },
  { title: "NichtraucheridentitÃ¤t gefestigt", days: 1460, desc: "Rauchen ist kein Thema mehr." },
  { title: "RÃ¼ckfallrisiko minimal", days: 1825, desc: "Psychisch komplett losgelÃ¶st vom Rauchen." },
  { title: "Diabetesrisiko reduziert sich", days: 1825, desc: "Stoffwechsel normalisiert sich nachhaltig." },
  { title: "Schlaganfallrisiko auf Nichtraucher-Niveau", days: 1825, desc: "GroÃŸes Risiko verringert." },
  { title: "Krebsrisiko insgesamt deutlich gesenkt", days: 2190, desc: "Fortschreitende Risikoreduktion." },
  { title: "COPD-Risiko langfristig deutlich geringer", days: 2920, desc: "Lungenfunktion bleibt stabil." },
  { title: "Kehlkopf-, SpeiserÃ¶hren-, Mundkrebsrisiko halbiert", days: 3285, desc: "Stark gesenktes Krebsrisiko." },
  { title: "BauchspeicheldrÃ¼senkrebsrisiko sinkt deutlich", days: 3650, desc: "Fast wieder wie bei Nichtrauchern." },
  { title: "Herz-Kreislauf-Gesundheit vollstÃ¤ndig erholt", days: 4380, desc: "Arterien und Herz funktionieren wie bei Nichtrauchern." },
  { title: "Bessere Gehirnleistung im Alter", days: 3650, desc: "Weniger Risiko fÃ¼r Demenz und Vergesslichkeit." },
  { title: "Langsamerer Alterungsprozess", days: 730, desc: "Zellalterung verlÃ¤uft messbar langsamer." },
  { title: "Lebenserwartung deutlich erhÃ¶ht", days: 3650, desc: "5â€“10 Jahre mehr Leben im Vergleich zu Rauchern." },
  { title: "HÃ¶here LebensqualitÃ¤t auf allen Ebenen", days: 3650, desc: "Gesundheit, Wohlbefinden und Energie auf hohem Niveau." },
  { title: "Selbstvertrauen maximal", days: 1095, desc: "Stolz auf die VerÃ¤nderung tief verankert." }
  ];

  // Fortschritt berechnen
  function loadData() {
    const data = JSON.parse(localStorage.getItem("rauchfreiData"));
    if (!data || !data.quitDate || !data.quitTime) return null;
    const dateStr = `${data.quitDate}T${data.quitTime}`;
    const start = new Date(dateStr);
    const now = new Date();
    const minutes = Math.floor((now - start) / 60000);
    const days = minutes / 1440;
    return { ...data, start, minutes, days };
  }

  function showGreetingAndSpruch(data) {
    document.getElementById("userNameDisplay").innerText = data?.name || "Freund";
    const random = sprueche[Math.floor(Math.random() * sprueche.length)];
    document.getElementById("motivation").innerText = random;
  }

  function buildMilestones(data) {
    const container = document.getElementById("milestoneList");
    const groups = {
      "Kurzfristig": milestoneData.filter(m => m.days < 7),
      "Mittelfristig": milestoneData.filter(m => m.days >= 7 && m.days < 42),
      "Langfristig": milestoneData.filter(m => m.days >= 42 && m.days <= 365),
      "Sehr langfristig": milestoneData.filter(m => m.days > 365)
    };

    for (const [cat, list] of Object.entries(groups)) {
      const section = document.createElement("div");
      const header = document.createElement("h3");
      header.innerText = cat;
      section.appendChild(header);

      list.forEach(m => {
        const percent = Math.min(100, Math.round((data.days / m.days) * 100));
        const div = document.createElement("div");
        div.className = "milestone";
        div.innerHTML = `
          <h4>${m.title}</h4>
          <div class="circle" style="background: conic-gradient(green ${percent}%, #444 ${percent}%);">
            <span>${percent}%</span>
          </div>
          <p>${m.desc}</p>`;
        section.appendChild(div);
      });

      container.appendChild(section);
    }
  }

  function updateDashboard(data) {
    const groups = {
      "shortHealth": milestoneData.filter(m => m.days < 7),
      "midHealth": milestoneData.filter(m => m.days >= 7 && m.days < 42),
      "longHealth": milestoneData.filter(m => m.days >= 42 && m.days <= 365),
      "veryHealth": milestoneData.filter(m => m.days > 365)
    };
    for (const [id, list] of Object.entries(groups)) {
      const avg = list.length
        ? Math.round(list.map(m => Math.min(100, data.days / m.days * 100)).reduce((a, b) => a + b, 0) / list.length)
        : 0;
      const el = document.getElementById(id);
      if (el) {
        el.innerHTML = `${avg}%`;
        el.style.background = `conic-gradient(green ${avg}%, #444 ${avg}%)`;
      }
    }
  }

  // Initialisierung
  const loadedData = loadData();
  if (loadedData) {
    showGreetingAndSpruch(loadedData);
    buildMilestones(loadedData);
    updateDashboard(loadedData);
  }
</script>
</body>
</html>
