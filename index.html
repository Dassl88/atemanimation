<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rauchfrei Tracker</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background-color: #f4f4f9;
      color: #333;
    }

    header {
      background-color: #4caf50;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 24px;
    }

    .container {
      padding: 20px;
    }

    .content {
      display: none;
    }

    .active {
      display: block;
    }

    .section-title {
      font-size: 20px;
      margin-bottom: 10px;
    }

    .card {
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }

    .progress-bar {
      height: 30px;
      background-color: #ddd;
      border-radius: 15px;
      position: relative;
      overflow: hidden;
      margin-top: 10px;
    }

    .progress-bar-fill {
      height: 100%;
      background-color: #4caf50;
      width: 0%;
      transition: width 1s ease-in-out;
    }

    .button {
      background-color: #4caf50;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      text-align: center;
    }

    .button:hover {
      background-color: #45a049;
    }

    .milestone {
      background-color: #e0ffe0;
      padding: 15px;
      margin-bottom: 10px;
      border-left: 5px solid #4caf50;
    }

    .milestone.reached {
      background-color: #d0ffd0;
      border-left: 5px solid #81c784;
    }

    .input-field {
      margin-bottom: 10px;
      width: 100%;
    }

    .input-field input {
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .input-field select, .input-field button {
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .footer {
      text-align: center;
      margin-top: 20px;
      padding: 20px;
      background-color: #4caf50;
      color: white;
    }
  </style>
</head>
<body>

<header>
  üö≠ Raucherentw√∂hnung Tracker
</header>

<div class="container">
  <!-- Startseite -->
  <div id="home" class="content active">
    <div class="card">
      <h2 class="section-title">Dein Fortschritt</h2>
      <div id="progressInfo">
        <!-- Fortschritt und Meilensteine werden hier angezeigt -->
      </div>
    </div>

    <div class="card">
      <h2 class="section-title">Meilensteine</h2>
      <div id="milestoneList"></div>
    </div>

    <button class="button" onclick="showPage('settings')">Einstellungen</button>
  </div>

  <!-- Einstellungen -->
  <div id="settings" class="content">
    <h2 class="section-title">Einstellungen</h2>
    <div class="input-field">
      <label for="quitDate">Aufh√∂rdatum:</label>
      <input type="datetime-local" id="quitDate" />
    </div>

    <div class="input-field">
      <label for="cigsPerDay">Zigaretten pro Tag:</label>
      <input type="number" id="cigsPerDay" value="20" min="1" />
    </div>

    <div class="input-field">
      <label for="packPrice">Preis pro Packung (‚Ç¨):</label>
      <input type="number" id="packPrice" value="8" min="0" step="0.01" />
    </div>

    <div class="input-field">
      <label for="cigsPerPack">Zigaretten pro Packung:</label>
      <input type="number" id="cigsPerPack" value="20" min="1" />
    </div>

    <button class="button" onclick="saveSettings()">Einstellungen speichern</button>
    <button class="button" onclick="showPage('home')">Zur√ºck zur Startseite</button>
  </div>
</div>

<div class="footer">
  &copy; 2025 Rauchfrei Tracker. Alle Rechte vorbehalten.
</div>

<script>
  // Variablen
  let milestones = [];
  let quitDate = localStorage.getItem('quitDate');
  let cigsPerDay = localStorage.getItem('cigsPerDay') || 20;
  let packPrice = localStorage.getItem('packPrice') || 8;
  let cigsPerPack = localStorage.getItem('cigsPerPack') || 20;

  // Standardmeilensteine
  const defaultMilestones = [
    { title: "Tag 1", description: "Der erste Tag ohne Zigaretten", timeInDays: 1 },
    { title: "Woche 1", description: "1 Woche rauchfrei", timeInDays: 7 },
    { title: "Monat 1", description: "1 Monat rauchfrei", timeInDays: 30 },
    { title: "Jahr 1", description: "1 Jahr rauchfrei", timeInDays: 365 },
  ];

  // Initialisierung
  function init() {
    // Meilensteine laden
    milestones = JSON.parse(localStorage.getItem('milestones')) || defaultMilestones;
    renderHomePage();
  }

  // Fortschritt anzeigen
  function renderHomePage() {
    if (quitDate) {
      const currentDate = new Date();
      const quitDateTime = new Date(quitDate);
      const diffTime = currentDate - quitDateTime;
      const diffDays = Math.floor(diffTime / (1000 * 3600 * 24));
      const savedMoney = (diffDays * cigsPerDay * (packPrice / cigsPerPack)).toFixed(2);

      // Fortschrittsanzeige
      document.getElementById('progressInfo').innerHTML = `
        <p><strong>Gesparte Zeit:</strong> ${diffDays} Tage</p>
        <p><strong>Gespartes Geld:</strong> ‚Ç¨${savedMoney}</p>
        <div class="progress-bar">
          <div class="progress-bar-fill" style="width: ${Math.min(diffDays / 365 * 100, 100)}%"></div>
        </div>
      `;

      // Meilensteine
      const milestoneList = document.getElementById('milestoneList');
      milestoneList.innerHTML = '';
      milestones.forEach((milestone) => {
        const milestoneDate = new Date(quitDateTime);
        milestoneDate.setDate(milestoneDate.getDate() + milestone.timeInDays);

        const reached = diffTime >= (milestoneDate - quitDateTime);
        milestoneList.innerHTML += `
          <div class="milestone ${reached ? 'reached' : ''}">
            <h3>${milestone.title}</h3>
            <p>${milestone.description}</p>
            <p>Erreicht am: ${milestoneDate.toLocaleDateString()}</p>
          </div>
        `;
      });
    } else {
      document.getElementById('progressInfo').innerHTML = `
        <p>Du hast noch kein Aufh√∂rdatum festgelegt.</p>
      `;
    }
  }

  // Einstellungen speichern
  function saveSettings() {
    quitDate = document.getElementById('quitDate').value;
    cigsPerDay = document.getElementById('cigsPerDay').value;
    packPrice = document.getElementById('packPrice').value;
    cigsPerPack = document.getElementById('cigsPerPack').value;

    // Speichern
    localStorage.setItem('quitDate', quitDate);
    localStorage.setItem('cigsPerDay', cigsPerDay);
    localStorage.setItem('packPrice', packPrice);
    localStorage.setItem('cigsPerPack', cigsPerPack);

    alert('Einstellungen gespeichert!');
    showPage('home');
    renderHomePage();
  }

  // Seite wechseln
  function showPage(pageId) {
    document.querySelectorAll('.content').forEach(page => {
      page.classList.remove('active');
    });
    document.getElementById(pageId).classList.add('active');
  }

  // Initialisierung
  init();
</script>

</body>
</html>
