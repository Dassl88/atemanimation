<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Rauchfrei Tracker Pro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      padding: 20px;
      background-color: #111;
      font-family: Arial, sans-serif;
      color: white;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    /* Men√º-Stil */
    .menu {
      display: flex;
      justify-content: center;
      gap: 20px;
      background-color: #333;
      padding: 10px;
    }
    .menu button {
      background-color: #444;
      color: white;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 5px;
    }
    .menu button:hover {
      background-color: #666;
    }
    /* Inhalt */
    .content {
      display: none;
    }
    .active {
      display: block;
    }
    .input-block {
      text-align: center;
      margin-bottom: 30px;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      margin: 5px;
      border-radius: 8px;
      border: none;
    }
    button {
      background-color: #10b981;
      color: white;
      cursor: pointer;
    }
    .button-reset {
      background-color: #ef4444;
    }
    .info-box {
      background: #111;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 30px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    .grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }
    .reel {
      background: #222;
      border-radius: 16px;
      padding: 20px;
      width: 250px;
      text-align: center;
    }
    .progress-ring {
      position: relative;
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background: conic-gradient(#10b981 0%, #333 0%);
      margin: 0 auto;
    }
    .progress-ring span {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 24px;
      font-weight: bold;
      color: white;
    }
  </style>
</head>
<body>

  <h1>üö≠ Rauchfrei Tracker Pro</h1>

  <!-- Men√º-Navigation -->
  <div class="menu">
    <button onclick="showPage('start')">üè† Start</button>
    <button onclick="showPage('settings')">‚öôÔ∏è Einstellungen</button>
    <button onclick="showPage('addMilestone')">‚ûï Meilenstein hinzuf√ºgen</button>
  </div>

  <!-- Startseite -->
  <div id="start" class="content active">
    <div id="info" class="info-box"></div>
    <div id="reels" class="grid"></div>
  </div>

  <!-- Einstellungen -->
  <div id="settings" class="content">
    <h2>Einstellungen</h2>
    <div class="input-block">
      <label>Aufh√∂rdatum & Uhrzeit:</label><br />
      <input type="datetime-local" id="quitDate" /><br />

      <label>Zigaretten pro Tag:</label><br />
      <input type="number" id="cigsPerDay" value="20" /><br />

      <label>Preis pro Schachtel (‚Ç¨):</label><br />
      <input type="number" id="packPrice" value="8" step="0.01" /><br />

      <label>Zigaretten pro Schachtel:</label><br />
      <input type="number" id="cigsPerPack" value="20" /><br />

      <label>Alter:</label><br />
      <input type="number" id="age" value="30" /><br />

      <label>Gerauchte Jahre:</label><br />
      <input type="number" id="yearsSmoked" value="10" /><br />

      <button onclick="saveSettings()">Einstellungen speichern</button>
      <button onclick="resetData()" class="button-reset">Daten zur√ºcksetzen</button>
    </div>
  </div>

  <!-- Meilenstein hinzuf√ºgen -->
  <div id="addMilestone" class="content">
    <h2>Meilenstein hinzuf√ºgen</h2>
    <div class="input-block">
      <label>Titel:</label><br />
      <input type="text" id="milestoneTitle" /><br />

      <label>Beschreibung:</label><br />
      <input type="text" id="milestoneDescription" /><br />

      <label>Zeitpunkt (in Minuten, Stunden, Tagen, Monaten, Jahren):</label><br />
      <input type="number" id="milestoneTimeValue" value="1" /><br />
      <select id="milestoneTimeUnit">
        <option value="minutes">Minuten</option>
        <option value="hours">Stunden</option>
        <option value="days">Tagen</option>
        <option value="months">Monaten</option>
        <option value="years">Jahren</option>
      </select><br />

      <button onclick="addMilestone()">Meilenstein hinzuf√ºgen</button>
    </div>
  </div>

  <script>
    let milestones = JSON.parse(localStorage.getItem('milestones')) || [];

    // Vordefinierte Meilensteine
    const defaultMilestones = [
      { title: "Tag 1", description: "Der erste Tag ohne Zigaretten", timeValue: 1, timeUnit: "days" },
      { title: "Woche 1", description: "1 Woche rauchfrei", timeValue: 7, timeUnit: "days" },
      { title: "Monat 1", description: "1 Monat rauchfrei", timeValue: 1, timeUnit: "months" },
      { title: "Jahr 1", description: "1 Jahr rauchfrei", timeValue: 1, timeUnit: "years" }
    ];

    // F√ºgt vordefinierte Meilensteine hinzu, falls noch keine Meilensteine vorhanden sind
    if (milestones.length === 0) {
      milestones = defaultMilestones;
      localStorage.setItem('milestones', JSON.stringify(milestones));
    }

    // Zeigt die entsprechende Seite an
    function showPage(pageId) {
      document.querySelectorAll('.content').forEach(page => {
        page.classList.remove('active');
      });
      document.getElementById(pageId).classList.add('active');
    }

    // Speichern der Einstellungen
    function saveSettings() {
      const quitDate = document.getElementById('quitDate').value;
      const cigsPerDay = parseInt(document.getElementById('cigsPerDay').value);
      const packPrice = parseFloat(document.getElementById('packPrice').value);
      const cigsPerPack = parseInt(document.getElementById('cigsPerPack').value);
      const age = parseInt(document.getElementById('age').value);
      const yearsSmoked = parseInt(document.getElementById('yearsSmoked').value);

      if (!quitDate || isNaN(cigsPerDay) || isNaN(packPrice) || isNaN(cigsPerPack) || isNaN(age) || isNaN(yearsSmoked)) {
        alert("Bitte alle Eingaben korrekt ausf√ºllen!");
        return;
      }

      localStorage.setItem('quitDate', quitDate);
      localStorage.setItem('cigsPerDay', cigsPerDay);
      localStorage.setItem('packPrice', packPrice);
      localStorage.setItem('cigsPerPack', cigsPerPack);
      localStorage.setItem('age', age);
      localStorage.setItem('yearsSmoked', yearsSmoked);

      alert("Einstellungen gespeichert!");
    }

    // Meilenstein hinzuf√ºgen
    function addMilestone() {
      const title = document.getElementById('milestoneTitle').value;
      const description = document.getElementById('milestoneDescription').value;
      const timeValue = parseInt(document.getElementById('milestoneTimeValue').value);
      const timeUnit = document.getElementById('milestoneTimeUnit').value;

      if (!title || !description || isNaN(timeValue)) {
        alert("Bitte alle Eingaben korrekt ausf√ºllen!");
        return;
      }

      const newMilestone = {
        title,
        description,
        timeValue,
        timeUnit,
        timestamp: Date.now() + convertTimeToMilliseconds(timeValue, timeUnit)
      };

      milestones.push(newMilestone);
      milestones.sort((a, b) => a.timestamp - b.timestamp);  // Zeitlich sortieren

      localStorage.setItem('milestones', JSON.stringify(milestones));

      alert("Meilenstein hinzugef√ºgt!");
      showPage('start');
      displayProgress();  // Update der Fortschrittsanzeige
    }

    // Hilfsfunktion zur Zeitumrechnung
    function convertTimeToMilliseconds(value, unit) {
      switch (unit) {
        case 'minutes': return value * 60000;
        case 'hours': return value * 3600000;
        case 'days': return value * 86400000;
        case 'months': return value * 2592000000; // Grob: 30 Tage
        case 'years': return value * 31536000000; // Grob: 365 Tage
        default: return 0;
      }
    }

    // Fortschritt anzeigen
    function displayProgress() {
      const infoBox = document.getElementById("info");
      const quitDate = localStorage.getItem('quitDate');
      const now = new Date();
      const quitTime = new Date(quitDate);
      const diffTime = now - quitTime;
      const diffDays = diffTime / (1000 * 3600 * 24);

      infoBox.innerHTML = `
        <h2>Dein Fortschritt</h2>
        <p><strong>Gesparte Tage:</strong> ${Math.floor(diffDays)}</p>
        <p><strong>Meilensteine erreicht:</strong></p>
        <div id="reels"></div>
      `;

      const reelsContainer = document.getElementById("reels");
      reelsContainer.innerHTML = "";

      milestones.forEach(milestone => {
        const percent = Math.min((diffTime / milestone.timestamp) * 100, 100);
        const reel = document.createElement("div");
        reel.className = "reel";
        reel.innerHTML = `
          <h3 class="milestone-title">${milestone.title}</h3>
          <div class="progress-ring" style="background: conic-gradient(#10b981 ${percent}%, #333 ${percent}%);">
            <span>${Math.floor(percent)}%</span>
          </div>
          <p class="milestone-description">${milestone.description}</p>
          ${percent === 100 ? '<p class="milestone-status">‚úÖ Erreicht!</p>' : ""}
        `;
        reelsContainer.appendChild(reel);
      });
    }

    // Daten zur√ºcksetzen
    function resetData() {
      localStorage.clear();
      location.reload();
    }

    // Initialisierung
    displayProgress();
  </script>

</body>
</html>

