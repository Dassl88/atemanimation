<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Rauchfrei App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial; background: #121212; color: white; margin: 0; }
    nav { display: flex; justify-content: space-around; background: #1f1f1f; padding: 10px; position: sticky; top: 0; }
    nav a { color: white; padding: 10px 20px; text-decoration: none; }
    nav a.active-nav { background: green; border-radius: 5px; }
    .section { display: none; padding: 20px; }
    .section.active { display: block; }
    .circle { width: 100px; height: 100px; border-radius: 50%; background: conic-gradient(green 0%, #444 0); display: flex; align-items: center; justify-content: center; margin: 10px auto; font-weight: bold; }
    .milestone { background: #1f1f1f; margin: 15px 0; padding: 15px; border-radius: 10px; text-align: center; }
    form label { display: block; margin-top: 10px; }
    form input { width: 100%; padding: 8px; margin-top: 5px; }
    form button { margin-top: 15px; padding: 10px; background: green; color: white; border: none; cursor: pointer; }
  </style>
</head>
<body>
  <nav>
    <a href="#" class="active-nav" onclick="showSection('dashboard')">Dashboard</a>
    <a href="#" onclick="showSection('meilensteine')">Meilensteine</a>
    <a href="#" onclick="showSection('daten')">Meine Daten</a>
  </nav>

  <section id="dashboard" class="section active">
    <h2 style="text-align:center;">Hallo <span id="userNameDisplay"></span> ðŸ‘‹</h2>
    <p style="text-align:center;" id="motivation"></p>
    <div class="health-grid">
      <div class="health-item"><h4>Kurzfristig</h4><div class="circle" id="shortHealth">0%</div></div>
      <div class="health-item"><h4>Mittelfristig</h4><div class="circle" id="midHealth">0%</div></div>
      <div class="health-item"><h4>Langfristig</h4><div class="circle" id="longHealth">0%</div></div>
      <div class="health-item"><h4>Sehr langfristig</h4><div class="circle" id="veryHealth">0%</div></div>
    </div>
  </section>
  <section id="daten" class="section">
    <h2 style="text-align:center;">Meine Daten</h2>
    <form id="userDataForm">
      <label>Name:<input type="text" id="name" required></label>
      <label>AufhÃ¶rdatum:<input type="date" id="quitDate" required></label>
      <label>Uhrzeit:<input type="time" id="quitTime" required></label>
      <label>Zigaretten/Tag:<input type="number" id="cigsPerDay" required></label>
      <label>Zigaretten pro Schachtel:<input type="number" id="cigsPerPack" required></label>
      <label>Preis pro Schachtel (â‚¬):<input type="number" step="0.01" id="packPrice" required></label>
      <label>Alter:<input type="number" id="age"></label>
      <label>Jahre geraucht:<input type="number" id="yearsSmoked"></label>
      <button type="submit">Speichern</button>
    </form>
  </section>
  <section id="meilensteine" class="section">
    <h2 style="text-align:center;">Alle Meilensteine</h2>
    <div id="milestoneList"></div>
  </section>

  <script>
    // Navigation
    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelectorAll('nav a').forEach(a => a.classList.remove('active-nav'));
      document.querySelector(`nav a[onclick*="${id}"]`).classList.add('active-nav');
    }

    // MotivationssprÃ¼che
    const sprueche = [
      "Heute ist ein guter Tag, um stark zu sein.",
      "Jede Zigarette, die du nicht rauchst, zÃ¤hlt.",
      "Du atmest jetzt freier.",
      "Dein Herz dankt dir.",
      "Du wirst jeden Tag gesÃ¼nder.",
      "Freiheit beginnt mit dem ersten Schritt.",
      "Du schaffst das â€“ und zwar dauerhaft.",
      "Ein neuer Anfang beginnt jetzt.",
      "Du bist stÃ¤rker als der Drang.",
      "Dein KÃ¶rper regeneriert sich.",
      "Du gewinnst Leben zurÃ¼ck.",
      "Lass den Rauch hinter dir.",
      "Die Zukunft ist rauchfrei.",
      "Heute bist du dein Held.",
      "Mit jedem Atemzug wirdâ€™s besser.",
      "Mach weiter â€“ du bist auf dem Weg.",
      "Du bist nicht allein.",
      "Du bist mutig â€“ und frei.",
      "Rauchfrei ist das neue GlÃ¼ck.",
      "Du hast dich selbst gewÃ¤hlt."
    ];

    // Daten speichern
    const form = document.getElementById("userDataForm");
    form.addEventListener("submit", function(e) {
      e.preventDefault();
      const data = {};
      ["name","quitDate","quitTime","cigsPerDay","cigsPerPack","packPrice","age","yearsSmoked"].forEach(id => {
        data[id] = document.getElementById(id).value;
      });
      localStorage.setItem("rauchfreiData", JSON.stringify(data));
      alert("Daten gespeichert!");
      location.reload();
    });

    // Meilensteindaten â€“ Liste folgt im nÃ¤chsten Block
  </script>
<script>
  const milestoneData = [
    { title: "Puls und Blutdruck", days: 0.01, desc: "Puls und Blutdruck sinken auf Normalniveau." },
    { title: "KÃ¶rpertemperatur reguliert sich", days: 0.02, desc: "HÃ¤nde und FÃ¼ÃŸe werden besser durchblutet." },
    { title: "Durchblutung verbessert sich", days: 0.08, desc: "ExtremitÃ¤ten werden wÃ¤rmer und besser versorgt." },
    { title: "Sauerstoffgehalt", days: 0.33, desc: "Sauerstoffgehalt im Blut normalisiert sich." },
    { title: "Kohlenmonoxidspiegel sinkt", days: 1, desc: "Kohlenmonoxid wird vollstÃ¤ndig abgebaut." },
    { title: "Mentale Klarheit kehrt zurÃ¼ck", days: 1.5, desc: "Konzentration verbessert sich." },
    { title: "Geruch des Rauchens nimmt ab", days: 2, desc: "Atem, Haut und Kleidung riechen frischer." },
    { title: "Geschmackssinn kehrt zurÃ¼ck", days: 2, desc: "Essen schmeckt wieder intensiver." },
    { title: "Nikotinabbau", days: 3, desc: "Nikotin ist komplett aus dem KÃ¶rper." },
    { title: "Erster Energieschub", days: 6, desc: "Du fÃ¼hlst dich vitaler." },
    { title: "1 Woche rauchfrei â€“ erster groÃŸer Meilenstein", days: 7, desc: "Erste kritische HÃ¼rde Ã¼berwunden." },
    { title: "Lungenfunktion verbessert sich deutlich", days: 21, desc: "Besseres Atemvolumen, weniger Luftnot." },
    { title: "Husten verschwindet vollstÃ¤ndig", days: 180, desc: "Atemwege sind frei." },
    { title: "Herzinfarktrisiko halbiert", days: 365, desc: "Risiko ist nur noch halb so hoch wie bei Rauchern." },
    { title: "Schlaganfallrisiko sinkt", days: 1825, desc: "Auf Niveau eines Nichtrauchers." }
  ];

  // Fortschritt berechnen
  function loadData() {
    const data = JSON.parse(localStorage.getItem("rauchfreiData"));
    if (!data || !data.quitDate || !data.quitTime) return null;
    const dateStr = `${data.quitDate}T${data.quitTime}`;
    const start = new Date(dateStr);
    const now = new Date();
    const minutes = Math.floor((now - start) / 60000);
    const days = minutes / 1440;
    return { ...data, start, minutes, days };
  }

  function showGreetingAndSpruch(data) {
    document.getElementById("userNameDisplay").innerText = data?.name || "Freund";
    const random = sprueche[Math.floor(Math.random() * sprueche.length)];
    document.getElementById("motivation").innerText = random;
  }

  function buildMilestones(data) {
    const container = document.getElementById("milestoneList");
    const groups = {
      "Kurzfristig": milestoneData.filter(m => m.days < 7),
      "Mittelfristig": milestoneData.filter(m => m.days >= 7 && m.days < 42),
      "Langfristig": milestoneData.filter(m => m.days >= 42 && m.days <= 365),
      "Sehr langfristig": milestoneData.filter(m => m.days > 365)
    };

    for (const [cat, list] of Object.entries(groups)) {
      const section = document.createElement("div");
      const header = document.createElement("h3");
      header.innerText = cat;
      section.appendChild(header);

      list.forEach(m => {
        const percent = Math.min(100, Math.round((data.days / m.days) * 100));
        const div = document.createElement("div");
        div.className = "milestone";
        div.innerHTML = `
          <h4>${m.title}</h4>
          <div class="circle" style="background: conic-gradient(green ${percent}%, #444 ${percent}%);">
            <span>${percent}%</span>
          </div>
          <p>${m.desc}</p>`;
        section.appendChild(div);
      });

      container.appendChild(section);
    }
  }

  function updateDashboard(data) {
    const groups = {
      "shortHealth": milestoneData.filter(m => m.days < 7),
      "midHealth": milestoneData.filter(m => m.days >= 7 && m.days < 42),
      "longHealth": milestoneData.filter(m => m.days >= 42 && m.days <= 365),
      "veryHealth": milestoneData.filter(m => m.days > 365)
    };
    for (const [id, list] of Object.entries(groups)) {
      const avg = list.length
        ? Math.round(list.map(m => Math.min(100, data.days / m.days * 100)).reduce((a, b) => a + b, 0) / list.length)
        : 0;
      const el = document.getElementById(id);
      if (el) {
        el.innerHTML = `${avg}%`;
        el.style.background = `conic-gradient(green ${avg}%, #444 ${avg}%)`;
      }
    }
  }

  // Initialisierung
  const loadedData = loadData();
  if (loadedData) {
    showGreetingAndSpruch(loadedData);
    buildMilestones(loadedData);
    updateDashboard(loadedData);
  }
</script>
</body>
</html>
